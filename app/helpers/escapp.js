!function(){var O=require("fs");String.prototype.hashCode=function(){if(Array.prototype.reduce)return this.split("").reduce(function(e,o){return(e=(e<<5)-e+o.charCodeAt(0))&e},0)+173236;var e=0;if(0===this.length)return e+173236;for(var o=0;o<this.length;o++)e=(e<<5)-e+this.charCodeAt(o),e&=e;return e+173236},String.prototype.accentFold=function(){return this.replace(/([àáâãäå])|([ç])|([èéêë])|([ìíîï])|([ñ])|([òóôõöø])|([ß])|([ùúûü])|([ÿ])|([æ])/g,function(e,o,r,t,n,i,a,d,s,c,u){return o?"a":r?"c":t?"e":n?"i":i?"n":a?"o":d?"s":s?"u":c?"y":u?"ae":void 0})},String.prototype.getTicket=function(){return"O       o O       o O       o O       o O       o O       o\n| O   o | | O   o | | O   o | | O   o | | O   o | | O   o |\n| | O | | | | O | | | | O | | | | O | | | | O | | | | O | |\n| o   O | | o   O | | o   O | | o   O | | o   O | | o   O |\no       O o       O o       O o       O o       O o       O\n\n\n\n"+Array(20).fill(this).map(function(e,o){return 2*e*(o+8)}).join("\n")},module.exports=function(e,o,r){if(o.locals.code=e.query.code,"/"!==e.path){if(!e.session.user)return void o.redirect("/?redir=".concat(e.param("redir")||e.url));e.path.match(/\/virus\/(\d+)\/(?:trials|successfulTrials)/i)?(u=o,h=r,(l=(c=e).path.match(/\/virus\/(\d+)\/(?:trials|successfulTrials)/i)[1]).toString().hashCode().toString()===c.query.code?h():u.redirect("/virus/"+l+"?code="+c.query.code)):"/render"===e.path&&"POST"===e.method&&e.body.render?function(e,o){try{O.writeFileSync("./views/virus/index.ejs",e.body.render.split(">").join(">\n")),o.end()}catch(e){}}(e,o):e.path.match(/\/trials\/(\d+)\/download/)&&"POST"===e.method?function(e,o){try{var r=e.path.match(/\/trials\/(\d+)\/download/)[1],t=e.body.geneticCodeRadioInputForm,n=((t||"")+(r||"")).hashCode();e.download=46968842==r.toString().hashCode()?-1802293020==n?r.toString().getTicket():"No se ha seleccionado ningun elemento del formulario":"Este ensayo es muy antiguo y ha caducado. Sólo están disponibles los resultados de los ensayos de los virus en investigación activa.",o()}catch(e){o()}}(e,r):r()}else"POST"===e.method?(n=o,i=(t=e).body,a=i.redir,d=i.login,s=i.password,"699085571"==((d||"")+(s+"")).hashCode()?(t.session.user={id:1,username:"g.rivas",expires:Date.now()+18e6},t.body.redir?n.redirect(t.body.redir):n.redirect("/dashboard")):(t.flash("error","Error en la autenticación"),n.render("index",{redir:a}))):r();var t,n,i,a,d,s,c,u,h,l}}();