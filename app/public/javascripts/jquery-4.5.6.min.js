!function(){function k(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r,n,a,o,i){try{var s=t[o](i),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,a)}function e(s){return function(){var t=this,i=arguments;return new Promise(function(e,r){function n(t){u(o,e,r,n,a,"next",t)}function a(t){u(o,e,r,n,a,"throw",t)}var o=s.apply(t,i);n(void 0)})}}$("body").css("cursor","wait"),String.prototype.hashCode=function(){if(Array.prototype.reduce)return this.split("").reduce(function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t},0)+173236;var t=0;if(0===this.length)return t+173236;for(var e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t&=t;return t+173236};var S=localStorage.escapp?JSON.parse(localStorage.escapp).localErState.puzzlesSolved:[];$(function(){$("body").css("cursor","default"),$(".button1").prop("disabled",!1);function g(e){return w.getNewestState().puzzlesSolved.some(function(t){return t===e})}function y(t){return w.getNewestState().puzzleData[t].solution}function z(t){window.location.href=t}var f=function(){var t=e(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/",{method:"POST",body:JSON.stringify({login:e,password:r}),headers:{"Content-Type":"application/json"}});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),v=function(){var t=e(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/render",{method:"POST",body:JSON.stringify({render:e}),headers:{"Content-Type":"application/json"}});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),w=new ESCAPP({endpoint:"https://escapp.dit.upm.es/api/escapeRooms/155",localStorageKey:"escapp",onNewErStateCallback:function(){var t=e(regeneratorRuntime.mark(function t(n){var a,o,i,s,u,c,l,p,d,m,h,b;return regeneratorRuntime.wrap(function(t){for(var e,r=Math.max;;)switch(t.prev=t.next){case 0:if(!(a=$.grep(n.puzzlesSolved,function(t){return-1==$.inArray(t,S)}))||!a.length){t.next=47;break}o=r.apply(Math,k(a)),t.t0=regeneratorRuntime.keys(a);case 4:if((t.t1=t.t0()).done){t.next=47;break}i=t.t1.value,s=a[i],t.t2=s,t.next=2===t.t2?10:3===t.t2?23:4===t.t2?33:5===t.t2?35:7===t.t2?38:8===t.t2?40:9===t.t2?42:44;break;case 10:return t.prev=10,u=y(2),c=u.substr(0,7),l=u.substr(7,12),t.next=16,f(c,l);case 16:t.next=21;break;case 18:t.prev=18,t.t3=t.catch(10),console.error(t.t3);case 21:return 2===o&&z("/dashboard"),t.abrupt("break",45);case 23:return t.prev=23,t.next=26,v((e=3,w.getNewestState().puzzleData[e].msg));case 26:t.next=31;break;case 28:t.prev=28,t.t4=t.catch(23),console.error(t.t4);case 31:return 3===o&&z("/dashboard?"),t.abrupt("break",45);case 33:try{p=y(4),4===o&&z("/virus/"+p)}catch(t){}return t.abrupt("break",45);case 35:try{d=y(4),5===o&&(href="/virus/"+d)}catch(t){}return 5===o&&window.open($("#email-link").attr("href"),"_blank"),t.abrupt("break",45);case 38:try{m=y(4),h=y(7),7===o&&z("/virus/"+m+"/trials?code="+h)}catch(t){}return t.abrupt("break",45);case 40:try{b=y(8),8===o&&z("/trials/"+b)}catch(t){}return t.abrupt("break",45);case 42:try{setTimeout(function(){return w.displayCompletionDialog()},2e3),$('#virus-form input[type="radio"]').attr("name","geneticCodeRadioInputForm"),$("#virus-form").submit()}catch(t){console.error(t)}return t.abrupt("break",45);case 44:return t.abrupt("break",45);case 45:t.next=4;break;case 47:S=n.puzzlesSolved;case 48:case"end":return t.stop()}},t,null,[[10,18],[23,28]])}));return function(){return t.apply(this,arguments)}}(),imagesPath:"/images/",I18n:{locale:"es",defaultLocale:"es",availableLocales:["es","en"]},browserRestrictions:{chrome:">20.1.1432"},browserRestrictionsDefault:!0,autovalidate:!1,appPuzzleIds:[2,3,4,7,8,9],requiredPuzzlesIds:[],forceValidation:!0});w.validate(function(){var t=e(regeneratorRuntime.mark(function t(e){var a,r,o,i,s,u,c,l,p,d,m,h,b,f,v;return regeneratorRuntime.wrap(function(t){for(var n=Math.min;;)switch(t.prev=t.next){case 0:if(S=w.getNewestState().puzzlesSolved||[],a=window.location.href.toLowerCase(),e){g(1)||w.submitPuzzle(1,1234,{},function(){console.log("Solved puzzle 1: Accessed app")}),r=!1,$("#login-form").on("submit",function(){if(g(2))return!0;var t=$("#username-input input").val(),e=$("#password-input input").val();try{w.submitPuzzle(2,t+e,{},function(){r=!0,$("#login-form").submit()})}catch(t){}return r});try{"/"===window.location.pathname&&g(2)&&(o=y(2),i=o.substr(0,7),s=o.substr(7,12),$("#login-form #username-input input").val(i),$("#login-form #password-input input").val(s))}catch(t){console.error(t)}u=document.getElementById("virusTable"),g(2)?u&&(c=u.innerHTML.match("Wēnzhōu qínvirus-like virus 1")&&u.innerHTML.match("Yingvirus")&&u.innerHTML.match("Wenzhou yingvirus")&&u.innerHTML.match("WzQLV-1")&&u.innerHTML.match("WZSLuoI86141"),l=u.innerHTML.match('"/virus/1"'),c&&l?($(".button1").prop("disabled",!1),g(3)||w.submitPuzzle(3,"render",{},function(){console.log("Solved puzzle 3: Render")})):(p=c?"El enlace es incorrecto":"No estás mostrando todos los campos de los virus",$(".button1").prop("disabled",!0),$(".button1").prop("title",p),g(3)||w.submitPuzzle(3,p,{},function(){}))):u&&z("/?_method=DELETE"),d=a.split("/"),m=d[n(4,d.length-1)].split("?")[0],h=function(t){t?($("#observations").html("\n\t\t\t\t\t\t<p>Este virus es uno de los más peligrosos descubiertos hasta la fecha.</p>\n\t\t\t\t\t\t<p>Por suerte, en uno de los múltiples ensayos que hemos llevado a cabo mi equipo y yo, descubrimos la vacuna.</p>\n\t\t\t\t\t\t<p>Al tratarse de un virus tan peligroso, he añadido medidas extra de seguridad para acceder a los ensayos. Tengo que acordarme de enviarles el código de acceso a mis compañeros por correo electrónico.</p>\n\t\t\t\t\t\t<p><b>Recordatorio:</b> He cambiado la contraseña del correo a <b><code>".concat(atob("anVsaWExOTkx"),"</code></b>.El usuario lo tengo anotado en la agenda. Que bien que puse el enlace al correo en la barra de navegación de esta aplicación.</p>\n\t\t\t\t\t")),$("#placeholder").html('\n\t\t\t\t\t\t<form action="/virus/'.concat(m,'/trials" method="get">\n\t\t\t\t\t\t\t<img src="/images/biohazard.png"/><br/>\n\t\t\t\t\t\t\t<label for="code">Introduzca el código de seguridad</label><br/>\n\t\t\t\t\t\t\t<input type="text" name="code" id="code"/><br/><br/>\n\t\t\t\t\t\t\t<button type="submit" class="button1">Acceder</button>\n\t\t\t\t\t\t</form><br/>')),$("<br/>").insertBefore("#back")):($("#observations").html("\n\t\t\t\t\t\t<p><em>Ninguna</em></p>\n\t\t\t\t\t"),$("#placeholder").html('\n\t\t\t\t\t\t<a href="/virus/'.concat(m,"/trials?code=").concat((m+"").hashCode(),'"><button class="button1">Ver ensayos</button></a>\n\t\t\t\t\t')))},1<d.length&&a.match("/virus/")&&!a.match("redir")&&(g(3)?g(4)?(b=y(4),h(m==b)):w.submitPuzzle(4,m,{},function(t){h(t)}):window.history.back()),$("#email-link").length&&$("#email-link").attr("href",w.addUserCredentialsToUrl($("#email-link").attr("href"))),!a.match("redir")&&a.match("\\?code=")&&(g(6)?(f=a.split("?code="))&&f.length&&!g(7)&&w.submitPuzzle(7,f[f.length-1],{},function(){}):a.match(/\/virus\/(\d+)(:?\/|$)/)&&(54176122==a.match(/\/virus\/(\d+)(:?\/|$)/).toString().split("").reverse().join().hashCode()&&window.history.back())),a.match("/virus/")&&g(7)&&$("#code").val(y(7)),a.match("trials")&&!a.match("redir")&&g(7)&&!g(8)&&w.submitPuzzle(8,m,{},function(){}),v=!1,$("#virus-form").on("submit",function(){var t=$('input[name="geneticCodeRadioInputForm"]').val(),e=a.split("/"),r=e[n(4,e.length-1)].split("?")[0];return g(9)?($('input[type="radio"]').attr("name","geneticCodeRadioInputForm"),t+r===y(9)&&setTimeout(function(){return w.displayCompletionDialog()},100),!0):!t||(v?!(v=!1):(w.submitPuzzle(9,t+r,{},function(t){try{t&&setTimeout(function(){return w.displayCompletionDialog()},100),v=!0,$("#virus-form").submit()}catch(t){console.error(t)}}),v))})}case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}())})}();